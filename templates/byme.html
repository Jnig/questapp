<ion-view title="{{'quests'|translate}}">
    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
        <span class="badge badge-assertive" ng-show='unread.count > 0'>{{unread.count}}</span>
    </ion-nav-buttons>
    <ion-content class="has-header">
        <div class="col" ng-show="!questsByMe.length" id="noresults" translate>
            no quests sent yet
        </div>
        <ion-list>
            <ion-item class="item_chats" id="questbyme" ng-repeat="quest in questsByMe" ng-click="showAnswers(quest)" ng-class="{unread: quest.unread==1}">
                <div class="box_pictures">
                    <div ng-repeat="answer in quest.answers | filter:query | limitTo:4">
                         <a href="#/app/public/{{answer.message.user.id}}?firstname={{answer.message.user.firstname}}">
                             <div class="box_profilepic">
                                <img ng-src="{{answer.message.user.avatar_thumb}}" alt="{{answer.message.user.firstname}}" />
                             </div>
                         </a>
                    </div>
                </div>
                <div class="frame">
                    <div class="name" ng-init="number = quest.answers.length" translate>
                        {{number}} answers
                    </div>
                    <div class="text">
                        {{quest.text}}
                    </div>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
    <ion-footer-bar>
        <div class="inner">
            <div class="buttons">
                <a nav-clear title="for me" class="button" href="#/app/forme" translate>quests for me</a>
                <span class="badge badge-assertive" ng-show='unread.quest > 0'>{{unread.quest}}</span>
            </div>

            <div class="buttons">
                <a nav-clear title="by me" class="button" href="#/app/byme" translate>quests by me</a>
                <span class="badge badge-assertive" ng-show='unread.answer > 0'>{{unread.answer}}</span>
            </div>
            <div class="clear"></div>
        </div>
    </ion-footer-bar>
</ion-view>